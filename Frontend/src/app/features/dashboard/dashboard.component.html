<div class="dashboard-container">
  <aside class="sidebar">
    <div class="logo">FitLog</div>
    <nav>
      <a class="active">Pulpit</a>
      <a routerLink="/workouts">Treningi</a>
      <a>Dieta</a>
      <a routerLink="/settings">Ustawienia</a>
      <a (click)="logout()">Wyloguj</a>
    </nav>
  </aside>

  <main class="content">
    
    @if (userProfile(); as user) {
      <header>
        <h1>Cze≈õƒá, {{ user.username }}!</h1>
        <p>Twoje postƒôpy w tym tygodniu.</p>
      </header>

      <section class="chart-section">
        <div class="card chart-card">
           <div class="chart-header"><h3>Aktywno≈õƒá (Ostatnie 7 dni)</h3></div>
           <div class="chart-container">
              @for (day of weeklyChartData(); track day.date) {
                <div class="chart-bar-wrapper">
                  <div class="bar" [style.height.%]="day.heightPercent" [class.active]="day.heightPercent > 0"></div>
                  <span class="day-label">{{ day.dayName }}</span>
                </div>
              }
           </div>
        </div>
      </section>

      <div class="stats-grid">
        <div class="card">
          <div class="card-icon blue">üí™</div>
          <div><h3>Treningi</h3><p class="big-number">{{ userWorkouts().length }}</p></div>
        </div>
        <div class="card">
          <div class="card-icon orange">üî•</div>
          <div><h3>Kalorie</h3><p class="big-number">{{ totalCalories() }}</p></div>
        </div>
      </div>

      <section class="recent-activity">
        <div class="section-header">
          <h2>Ostatnie Aktywno≈õci</h2>
          <a routerLink="/workouts" class="view-all-link">Zobacz wszystkie &rarr;</a>
        </div>

        <div class="activity-list">
          @for (workout of userWorkouts().slice(0, 5); track workout.id) {
            <div class="activity-item">
              
              <div class="left-content">
                <div class="icon-circle" [ngClass]="workout.type === 'CARDIO' ? 'cardio' : 'strength'">
                   @if (workout.type === 'CARDIO') { üèÉ‚Äç‚ôÇÔ∏è } @else { üèãÔ∏è‚Äç‚ôÄÔ∏è }
                </div>
                <div class="info">
                  <span class="title">
                    {{ workout.type === 'Gym' ? $any(workout).name || 'Si≈Çowy' : 'Cardio' }}
                  </span>
                  <span class="subtitle">
                    {{ workout.date | date:'dd.MM' }} ‚Ä¢ {{ workout.duration }} min ‚Ä¢ {{ workout.calories }} kcal
                  </span>
                </div>
              </div>

              <div class="right-content">
                @if (workout.type === 'CARDIO' && $any(workout).distance) {
                  <span class="badge highlight">{{ $any(workout).distance }} km</span>
                }
                @if (workout.type === 'Gym') {
                   <span class="badge highlight">{{ $any(workout).weight }}kg</span>
                }
              </div>

            </div>
          }
        </div>
      </section>

    }
  </main>
</div>