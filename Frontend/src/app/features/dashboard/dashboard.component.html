<div class="dashboard-container">
  
  <aside class="sidebar">
    <div class="logo">FitLog</div>
    <nav>
      <a class="active"><span>ğŸ </span> Pulpit</a>
      <a routerLink="/workouts"><span>ğŸ’ª</span> Treningi</a>
      <a><span>ğŸ¥—</span> Dieta</a>
      <a routerLink="/settings"><span>âš™ï¸</span> Ustawienia</a>
      <a (click)="logout()"><span>ğŸšª</span> Wyloguj</a>
    </nav>
  </aside>

  <main class="content">
    
    @if (userProfile(); as user) {
      <header>
        @if (settingsService.showUsername()) {
          <h1>Witaj, {{ user.username }}! ğŸ‘‹</h1>
        } @else {
          <h1>Witaj, {{ user.firstName || user.username }}! ğŸ‘‹</h1>
        }
        <p>Oto podsumowanie Twoich postÄ™pÃ³w w tym tygodniu.</p>
      </header>

      <section class="chart-section">
        <div class="card chart-card">
           <div class="chart-header">
             <h3>AktywnoÅ›Ä‡ (Ostatnie 7 dni)</h3>
           </div>
           <div class="chart-container">
              @for (day of weeklyChartData(); track day.date) {
                <div class="chart-bar-wrapper">
                  <div class="bar" 
                       [style.height.%]="day.heightPercent" 
                       [class.active]="day.heightPercent > 0"
                       [title]="day.value + ' kcal'">
                  </div>
                  <span class="day-label">{{ day.dayName }}</span>
                </div>
              }
           </div>
        </div>
      </section>

      <div class="stats-grid">
        <div class="card">
          <div class="card-icon blue">ğŸ’ª</div>
          <div>
            <h3>Treningi</h3>
            <p class="big-number">{{ userWorkouts().length }}</p>
          </div>
        </div>
        <div class="card">
          <div class="card-icon orange">ğŸ”¥</div>
          <div>
            <h3>Spalone Kalorie</h3>
            <p class="big-number">{{ totalCalories() }}</p>
          </div>
        </div>
      </div>

      <section class="recent-activity">
        <div class="section-header">
          <h2>Ostatnie AktywnoÅ›ci</h2>
          <a routerLink="/workouts" class="view-all-link">
            Zobacz wszystkie <span>&rarr;</span>
          </a>
        </div>

        <div class="activity-list">
          @if (userWorkouts().length === 0) {
            <div class="card" style="text-align: center; color: var(--text-muted);">
              Brak aktywnoÅ›ci. Dodaj swÃ³j pierwszy trening!
            </div>
          }

          @for (workout of userWorkouts().slice(0, 5); track workout.id) {
            <div class="activity-item">
              
              <div class="left-content">
                <div class="icon-circle" [ngClass]="workout.type === 'CARDIO' ? 'cardio' : 'strength'">
                   @if (workout.type === 'CARDIO') { ğŸƒâ€â™‚ï¸ } @else { ğŸ‹ï¸â€â™€ï¸ }
                </div>
                <div class="info">
                  <span class="title">
                    {{ workout.type === 'Gym' ? $any(workout).name || 'SiÅ‚owy' : 'Cardio' }}
                  </span>
                  <span class="subtitle">
                    {{ workout.date | date:'dd.MM.yyyy' }} â€¢ {{ workout.duration }} min â€¢ {{ workout.calories }} kcal
                  </span>
                </div>
              </div>

              <div class="right-content">
                @if (workout.type === 'CARDIO' && $any(workout).distance) {
                  <span class="badge highlight">{{ $any(workout).distance }} km</span>
                }
                @if (workout.type === 'Gym') {
                   <span class="badge highlight">{{ $any(workout).weight }} kg</span>
                }
              </div>

            </div>
          }
        </div>
      </section>

    }
  </main>
</div>